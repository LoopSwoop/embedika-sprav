# embedika-sprav
## Тестовове задание “Справочник автомобилей”
### Описание проекта

#### Примечание
В описании под названием сайта подразумевается http://localhost.
**Программа предполагает, что в папке с exe файлами также находится файл базы данных (SQLite) *Cars.db*.**

**В базе данных должна быть таблица *Cars*. Для создания таблицы с нуля можно воспользоваться следующей командой:**

**CREATE TABLE "Cars" (
	"id"	INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT UNIQUE,
	"num"	TEXT NOT NULL UNIQUE,
	"model"	TEXT NOT NULL,
	"color"	TEXT NOT NULL,
	"year"	INTEGER NOT NULL
)**

**Чтобы попробовать справочник перейдите в раздел релизы, там можно скачать архив с приложением.**

#### Использованные технологии
- Python
- Flask framework
- SQL
- HTML
- CSS
- JQuery

#### Общая структура
Приложение можно условно разделить на две части: реализация API и реализация интерфейса.
При этом API доступен по адресу: название_сайта:5000/api/..., а интерфейс
представлен по адресу: название_сайта:5001/cars/. За каждую часть отвечает свой сервер.
При использовании интерфейса запросы отправляются на адрес для API. Результаты выполнения
запросов как успешные, так и нет приходят в виде JSON объекта, обрабатываются и выводятся на странице.
Кроме того, для удобства пользователей выводятся всплывающие уведомления (успех или ошибка). К примеру,
если пользователь пытается добавить существующую запись, ничего не происходит, и ему выводится
уведомление, что запись уже существует. Все обращения к API записываются в лог файле.

#### Возможности API
##### Вывод всех авто из справочника
Для этого необходимо отправить GET запрос на адрес: название_сайта/api/allcars/.
В результате придет ответ в виде JSON объекта со всеми найденными машинами.

##### Вывод всех авто с заданными параметрами
Для этого необходимо отправить GET запрос на адрес: название_сайта/api/allcars/
добавив к нему параметры для URL. Параметры добавляются в саму ссылку, например
ссылка может выглядеть следующим образом: название_сайта/api/allcars/?id=4&color=red.
В том случае, если в ссылке будет указан несуществующий параметр в качестве результата
будет возвращен JSON объект с ошибкой. При поиске пустые параметры будет отображаться в поле адреса,
но к API будет отправляться очищенный запрос (не .../?id=&color=blue, а .../?color=blue).

##### Добавление нового авто
Для этого необходимо отправить POST запрос на адрес: название_сайта/api/allcars/.
Вместе с запросом следует передать JSON объект со всеми параметрами машины, кроме id. здесь предполагается
что этому полю в таблице номер выставляется автоматически. Пример JSON объекта:
{"num": "А937АА66", "model": "Daewoo Arcadia", "color": "black", "year": 1998}.
Если все необходимые параметры будут предоставлены и в базе не будет такой же машины, новый автомобиль
добавляется в базу. В противном случае возвращается JSON объект с ошибкой.

##### Удаление авто
Для этого необходимо отправить DELETE запрос на адрес: название_сайта/api/allcars/id_машины/.
Если такая машина будет найдена, она будет удалена. В противном случае возвращается JSON объект с ошибкой.

##### Вывод статистики
Для этого необходимо отправить GET запрос на адрес: название_сайта/api/allcars/stats/
В результате запроса возвращается JSON объект со статистикой по базе (количество записей, доступные года
выпуска, доступные цвета...).
